# Event-AEON: 季節脱出ゲーム

「失われた季節からの脱出」をテーマにしたイベント用Webアプリケーション

## 概要

4つの季節（春・夏・秋・冬）の謎を解き、最後のパズルを完成させて脱出を目指すゲームです。
最終パズルを解いた後、ICカードリーダーでカードを読み取り、ユーザーIDが一致すると脱出成功となります。

## 技術スタック

### フロントエンド
- **React 18** - UIライブラリ
- **TypeScript** - 型安全性
- **Vite** - 高速なビルドツール
- **ESLint** - コード品質チェック

### バックエンド
- **Express.js** - Webサーバー
- **pcsclite** - ICカードリーダー連携
- **SQLite3** - データベース（テストデータベース用）

## 機能

- 4つの季節の謎を解く
- 集めた文字を並べ替えて最終パズルを完成
- ICカードリーダーでカードを読み取り、ユーザーIDを照合
- スマホとPC（カードリーダー接続端末）の分離構成に対応
- ネットワーク経由での通信対応

## セットアップ

### 依存関係のインストール

```bash
npm install
```

### 開発サーバーの起動

#### 方法1: 一括起動（推奨）

```bash
npm start
```

または

```bash
./start.sh
```

これでフロントエンド（ポート3000）とバックエンド（ポート3001）が同時に起動します。

#### 方法2: 別々に起動

**ターミナル1（バックエンド）:**
```bash
npm run dev:server
```

**ターミナル2（フロントエンド）:**
```bash
npm run dev
```

### ネットワーク経由でのアクセス

スマホやタブレットからアクセスする場合：

1. PCとスマホを同じWi-Fiネットワークに接続
2. PC側でバックエンドサーバーを起動（`npm run dev:server`）
3. コンソールに表示されたネットワークIPアドレスを確認
4. スマホのブラウザで `http://PCのIPアドレス:3000` にアクセス

詳細は [SETUP_NETWORK.md](./SETUP_NETWORK.md) を参照してください。

### ビルド

```bash
npm run build
```

ビルドされたファイルは `dist` ディレクトリに出力されます。

### プレビュー

```bash
npm run preview
```

ビルドされたアプリケーションをプレビューできます。

## プロジェクト構造

```
Event-AEON/
├── src/                    # フロントエンドソースコード
│   ├── App.tsx            # メインアプリケーションコンポーネント
│   ├── Game.tsx           # ゲームロジック
│   ├── Login.tsx          # ログイン画面
│   ├── FinalPuzzleModal.tsx  # 最終パズルモーダル
│   ├── EscapeSuccessModal.tsx # 脱出成功モーダル
│   └── ...
├── server/                 # バックエンドサーバー
│   └── index.js           # Express.jsサーバー
├── テストデータベース/     # テスト用データベース
│   ├── cards.db           # SQLiteデータベース
│   ├── card_reader.js     # カードリーダー連携
│   └── ...
├── package.json           # プロジェクト設定
├── vite.config.ts         # Vite設定
├── start.sh               # 起動スクリプト
├── DEPLOY.md              # デプロイ手順
└── README.md              # このファイル
```

## デプロイ

さくらのVPSなどへのデプロイ手順は [DEPLOY.md](./DEPLOY.md) を参照してください。

## 開発のヒント

- `src/App.tsx` を編集してアプリケーションを開発します
- ゲームロジックは `src/Game.tsx` にあります
- バックエンドAPIは `server/index.js` にあります
- スタイルは各コンポーネントの `.css` ファイルに追加できます

## ライセンス

このプロジェクトはイベント用に作成されています。
